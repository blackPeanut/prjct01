"use strict";function toggleClass(e,n){var t=new RegExp("(?:^|\\s)"+n+"(?!\\S)");e.className.match(t)?e.className=e.className.replace(t,""):e.className+=" "+n}function mainFunction(){function e(){var e=Array.apply(null,arguments);e.forEach(function(e){var n=r(e),t=window.getComputedStyle(n,null);"hidden"===t.visibility?n.style.visibility="visible":"none"===t.display&&(n.style.display="block",console.log(n+" display value changed to 'block'"))})}function n(){function e(){var e=document.querySelectorAll(".quoteText > span"),n=e.length<=80?80:30,o=0,a;a=window.setInterval(function(){e[o].style.color="white",o+=1,o>=e.length&&(clearInterval(a),i(".quoteAuthor",1e3,t))},n)}var n=r(".quoteText");n.innerHTML="<span>"+n.innerHTML.split("").join("</span><span>")+"</span>",e()}function t(){o(".disabler",function(){e(".main",".footer",".menu",".footer"),i(".menu",500,function(){homepage=l.innerHTML})},100)}function o(e,n,t){var o=document.querySelector(e),i=parseInt(window.getComputedStyle(o,null).height),a=t?t:1,r;r=window.setInterval(function(){i-=3,o.style.height=i+"px",4>=i&&(o.style.height="0px",clearInterval(r),n&&setTimeout(n,a))},1)}function i(e,n,t,o){var i=r(e),a=0,l;l=window.setInterval(function(){a+=.02,i.style.opacity=a,i.style.opacity>=1&&(clearInterval(l),t&&setTimeout(t,o))},n/50)}function a(e){var n=parseInt(window.getComputedStyle(r(e),null).fontSize),t=parseInt(window.getComputedStyle(l,null).fontSize),o=n/t;return n/t}function r(e){return"string"==typeof e?document.querySelector(e):e}var l=r("body"),c=Hogan.compile(document.querySelector("#homepage_tmpl").innerHTML),u=Hogan.compile(document.querySelector("#quote_tmpl").innerHTML),s=Hogan.compile(document.querySelector("#menu_tmpl").innerHTML);l.innerHTML=c.render(),r(".blockquote").innerHTML=u.render(data.quotes[Math.floor(Math.random()*data.quotes.length)]),r(".menu").innerHTML=s.render(data);for(var m=r(".blockquote"),d=r(".quoteText"),f=r(".quoteAuthor"),p=a(d),g=a(f),y=g/p.toFixed(3);m.clientHeight<m.scrollHeight;)p-=.1,d.style.fontSize=p+"em",f.style.fontSize=p*y+"em";i(".disabler",1e3,function(){e(".main-page"),n()},300)}function getEl(e){return"string"==typeof e?document.querySelector(e):e}function renderPageTemplate(e){var n=Hogan.compile(getEl("#page_tmpl").innerHTML),t=n.render(data);getEl("body").innerHTML=t;var o=Hogan.compile(getEl("#page_tmpl_content").innerHTML),i=o.render(data.authors[e]);getEl(".main-tmpl").innerHTML=getEl("#partial_"+e).innerHTML,document.querySelector(".mobile-menu-btn").addEventListener("click",function(){var e=document.querySelector(".offside-section-tmpl");fl?(e.className+=" off-canvas",getEl(".off-canvas-menu").style.visibility="visible",fl=!1):(e.className="offside-section-tmpl",fl=!0)},!1)}function renderHomepage(){getEl("body").innerHTML=homepage}var homepage,offCanvas=!1;window.addEventListener("click",function(e){var n=e||window.event;if("mobile-menu-btn"===n.target.className){var t=getEl(".offside-section-tmpl")||getEl(".main-page");toggleClass(t,"off-canvas")}},!1);var routes={"/page":{"/:pageId":{on:function(e){renderPageTemplate(e)}}},"/":{once:function(){mainFunction()},before:function(){renderHomepage()}}},router=Router(routes);router.init("/");